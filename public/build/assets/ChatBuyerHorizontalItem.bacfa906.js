import A from"./PsCard.ba2c0a4b.js";import V from"./PsIcon.dc31c2db.js";import H from"./PsLabel.3cf95094.js";import{u as B}from"./AppInfoStore.266a6525.js";import{A as O}from"./AppInfoParameterHolder.e24d894d.js";import{u as j}from"./PsValueHolder.a0cf6b69.js";import{P}from"./PsValueStore.a232cbb1.js";import{P as v}from"./ps_constants.0e2a11f9.js";import{C as z}from"./ChatHistory.c3f26661.js";import{o as i,c as b,a,m as w,b as C,w as c,q as m,t as n,f as u,g,n as M,B as N,O as T,r as S,E as F}from"./app.0e502cc5.js";import{f as E}from"./format.min.502eec0f.js";import{h as k}from"./moment.9709ab41.js";import{_ as Y}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.98e573c3.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./Product.29c94914.js";import"./Category.7c65464b.js";import"./DefaultIcon.e76b39a5.js";import"./SubCategory.1b4176e0.js";import"./ItemCurrency.91c8ce91.js";import"./ItemLocation.d1b92a80.js";import"./ProductRelation.0b376978.js";import"./User.0c3ba1a8.js";import"./RatingDetail.291ad5d1.js";import"./Vendor.d946ee87.js";const L={name:"ChatHorizontalItem",components:{PsIcon:V,PsLabel:H,PsCard:A},props:{chathistory:{type:z},dateFormat:{type:String}},setup(o){P.psValueStore=j();const t=P().getLoginUserId(),h=new O;h.userId=t;const p=B();function I(e){return e.toString()=="0"?N("item_price__free"):E(p.appInfo.data.mobileSetting.price_format,e)}function s(e){T.get(route("fe_chat"),{buyer_user_id:e.buyerUserId,seller_user_id:e.sellerUserId,item_id:e.itemId,chat_flag:v.CHAT_FROM_BUYER.toString()})}function _(e){let l=e.split(" ")[0],r=e.split(" ")[1],f=new Date().toISOString().split("T")[0];r=r.split(":"),r.pop(),r=r.join(":");let U=new Date,x=new Date(U);x.setDate(x.getDate()-1);let D=x.toISOString().split("T")[0];switch(!0){case l==f:return r;case l==D:return"Yesterday";default:return k(l).format(o.dateFormat)}}function d(e,l){for(var r=0;r!=l.length;r++){var f=l[r];if(e.includes(f)!=-1)return f}return null}return{formatPrice:I,PsConst:v,appInfoStore:p,gotoDetail:s,chatTimeHistory:_,containAny:d,moment:k}}},R={class:"flex h-full"},q={class:"h-full w-[64px] sm:w-[100px] relative flex items-center"},G={alt:"Placeholder",class:"rounded-full bg-transparent h-16 w-16 sm:h-full sm:w-full border-2 border-feAchromatic-300"},J={class:"absolute left-9 top-12 w-6 h-6 block sm:hidden"},K={alt:"Placeholder",class:"rounded-full w-full h-full border-2 border-feAchromatic-100"},Q={class:"grow px-4 py-1"},W={class:"flex justify-between items-center w-full"},X={class:"flex justify-between w-full items-center"},Z={key:2,class:"flex justify-center items-center font-normal text-sm rounded-full w-5 h-5 bg-fePrimary-600 text-feAchromatic-200"},$={key:3,class:"w-10 h-10 flex justify-center items-center"},tt={class:"h-full hidden sm:block w-32"},et={alt:"Placeholder",class:"rounded w-full h-full"};function ot(o,y,t,h,p,I){var e;const s=S("ps-label"),_=S("ps-icon"),d=F("lazy");return i(),b("div",{class:"cursor-pointer",onClick:y[0]||(y[0]=l=>h.gotoDetail(t.chathistory))},[a("div",{class:M(`h-[80px] sm:h-[100px] rounded-lg shadow-sm overflow-hidden mb-3 ${((e=t.chathistory)==null?void 0:e.sellerUnreadCount)>0?"bg-feAchromatic-200":""} dark:bg-feSecondary-800`)},[a("div",R,[a("div",q,[w(a("img",G,null,512),[[d,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.buyer.userCoverPhoto,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]]),a("div",J,[w(a("img",K,null,512),[[d,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])]),a("div",Q,[C(s,{textColor:"font-semibold text-fePrimary-500 text-xs sm:text-xl"},{default:c(()=>[m(n(t.chathistory?t.chathistory.buyer.userName:""),1)]),_:1}),a("div",W,[t.chathistory?(i(),u(s,{key:0,class:"font-medium text-xs sm:text-lg lg:hidden block"},{default:c(()=>[m(n(t.chathistory.item.title.length>30?t.chathistory.item.title.slice(0,20)+".......":t.chathistory.item.title),1)]),_:1})):g("",!0),t.chathistory?(i(),u(s,{key:1,class:"font-medium text-xs sm:text-lg lg:block hidden"},{default:c(()=>[m(n(t.chathistory.item.title),1)]),_:1})):g("",!0),C(s,{class:"text-xs"},{default:c(()=>[m(n(t.chathistory.addedDateStr.includes("months")||t.chathistory.addedDateStr.includes("years")?h.moment(t.chathistory.addedDate).format(t.dateFormat):t.chathistory.addedDateStr),1)]),_:1})]),a("div",X,[t.chathistory?(i(),u(s,{key:0,class:"font-normal text-sm text-feAchromatic-400 lg:hidden block",textColor:"text-feAchromatic-600"},{default:c(()=>[m(n(t.chathistory.latestChatMessage.length>20?t.chathistory.latestChatMessage.slice(0,15)+"......":t.chathistory.latestChatMessage),1)]),_:1})):g("",!0),t.chathistory?(i(),u(s,{key:1,class:"font-normal text-sm text-feAchromatic-400 lg:block hidden",textColor:"text-feAchromatic-600"},{default:c(()=>[m(n(t.chathistory.latestChatMessage),1)]),_:1})):g("",!0),t.chathistory.sellerUnreadCount>0?(i(),b("span",Z,n(t.chathistory?t.chathistory.sellerUnreadCount:"0"),1)):(i(),b("div",$,[C(_,{name:"done_all",class:"text-feAchromatic-400",w:"24",h:"24"})]))])]),a("div",tt,[w(a("img",et,null,512),[[d,{src:o.$page.props.thumb1xUrl+"/"+t.chathistory.item.defaultPhoto.imgPath,loading:o.$page.props.sysImageUrl+"/loading_gif.gif",error:o.$page.props.sysImageUrl+"/default_photo.png"}]])])])],2)])}var Dt=Y(L,[["render",ot]]);export{Dt as default};
