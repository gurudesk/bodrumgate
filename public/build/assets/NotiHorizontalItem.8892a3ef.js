import M from"./PsLabel.3cf95094.js";import{N,u as R}from"./NotificationStore.656ac75f.js";import H from"./PsIcon.dc31c2db.js";import E from"./PsDropdown.f31a931d.js";import{P as O}from"./PsValueStore.a232cbb1.js";import{N as z,a as D}from"./NotiParameterHolder.43e91ada.js";import F from"./PsLoadingDialog.e4058754.js";import{i as I,o as x,c as y,a as r,m as b,b as i,w as f,q as C,t as P,g as S,n as L,O as T,B as A,r as _,E as V}from"./app.0e502cc5.js";import{P as u}from"./ps_constants.0e2a11f9.js";import{u as j,U as B}from"./UserUnReadMessageParameterHolder.181142c1.js";import q from"./PsConfirmDialog2.05536f6a.js";import{P as G}from"./PsUtils.78b0d4de.js";import J from"./PsLine.4597488d.js";import{h as K}from"./moment.9709ab41.js";import{_ as Q}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsApiService.98e573c3.js";import"./PsObject.a17ef38f.js";import"./DefaultPhoto.cc755f93.js";import"./ApiStatus.5720ba0b.js";import"./PsSepetetedStore.9a31ac47.js";import"./PsModal.20834757.js";import"./vue-neat-modal.d03c5dee.js";import"./PsLabelTitle.41617619.js";import"./PsButton.bc5ed803.js";const W={name:"NotiHorizontalItem",components:{PsLabel:M,PsDropdown:E,PsIcon:H,PsLoadingDialog:F,PsConfirmDialog2:q,PsLine:J},props:{noti:{type:N,default:new N},onClick:Function},setup(){const a=R(),e=O().getLoginUserId(),t=new D,g=new z,n=I();g.userId=e;const l=j(),c=new B;c.userId=e;const m=I(!1),v=I();async function k(o,p){n.value.closeModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=o,t.notiType=p,await a.markAsRead(t,e),await a.resetNotiList(g),await l.postUserUnreadMessageCount(c),n.value.closeModal()}async function U(o,p){n.value.closeModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=o,t.notiType=p,await a.markAsUnRead(t,e),await a.resetNotiList(g),await l.postUserUnreadMessageCount(c),n.value.closeModal()}async function h(o,p){n.value.closeModal(),m.value=!1,t.userId=e,t.deviceToken=localStorage.deviceToken,t.notiId=o,t.notiType=p,await a.deleteNoti(t,e),await a.resetNotiList(g),await l.postUserUnreadMessageCount(c),n.value.closeModal()}async function w(o){o.type==u.PUSH_NOTI?T.get(route("fe_notification_detail"),{notiId:o.id}):(o.type==u.CHAT_MESSAGE||o.type==u.OFFER_RECEIVED||o.type==u.OFFER_ACCEPTED||o.type==u.OFFER_REJECTED)&&(await k(o.id,o.type),n.value.closeModal(),T.get(route("fe_chat"),{buyer_user_id:o.buyerUserId,seller_user_id:o.sellerUserId,item_id:o.itemId,chat_flag:o.chatFlag}))}function d(o){v.value.openModal(A("noti_list__delete_title"),A("noti_list__delete_dialog"),A("chat__confirm"),A("chat__cancel"),()=>{h(o.id,o.type)},()=>{G.log("cancel")})}return{notiStore:a,showMenu:m,markAsRead:k,markAsUnRead:U,deleteNoti:h,ps_loading_dialog:n,ps_confirm_dialog:v,clickNoti:w,PsConst:u,deleteConfirm:d,moment:K}}},X={class:"flex flex-row justify-between h-[62px] sm:h-[100px]"},Y={class:"rounded-md bg-feAchromatic-50 dark:bg-feAchromatic-800"},Z={class:"sm:w-[100px] w-[62px] h-[62px] sm:h-[100px]"},$={key:0,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},ee={key:1,alt:"Placeholder",width:"15px",height:"10px",class:"w-[62px] h-[62px] sm:w-full sm:h-full rounded-md"},te={class:"flex flex-col ms-4 my-auto"},oe={class:"flex flex-col w-[62px] sm:w-[120px]"},ae={class:"flex justify-end w-full h-1/2"},se={class:"z-30"},ie={class:"h-1/2 w-full flex justify-end items-end p-1 sm:p-2"};function re(a,s,e,t,g,n){var w;const l=_("ps-label"),c=_("ps-icon"),m=_("ps-line"),v=_("ps-dropdown"),k=_("ps-loading-dialog"),U=_("ps-confirm-dialog-2"),h=V("lazy");return x(),y("div",{class:L([e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"bg-feSecondary-100":"bg-fePrimary-50 dark:bg-fePrimary-50":"bg-feSecondary-50","w-full cursor-pointer h-[62px] sm:h-[100px] dark:bg-feAchromatic-800 rounded"]),onClick:s[5]||(s[5]=d=>e.onClick!=null?e.onClick(e.noti):null)},[r("div",X,[r("div",{class:"flex-grow flex flex-row",onClick:s[0]||(s[0]=d=>t.clickNoti(e.noti))},[r("div",Y,[r("div",Z,[(w=e.noti)!=null&&w.senderCoverPhoto?b((x(),y("img",$,null,512)),[[h,{src:a.$page.props.thumb2xUrl+"/"+e.noti.senderCoverPhoto,loading:a.$page.props.sysImageUrl+"/loading_gif.gif",error:a.$page.props.sysImageUrl+"/default_photo.png"}]]):b((x(),y("img",ee,null,512)),[[h,{src:a.$page.props.thumb2xUrl+"/"+e.noti.defaultPhoto.imgPath,loading:a.$page.props.sysImageUrl+"/loading_gif.gif",error:a.$page.props.sysImageUrl+"/default_photo.png"}]])])]),r("div",te,[i(l,{class:"text-xxs sm:text-sm lg:text-base",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200",innerHTML:e.noti.message.length>75?e.noti.message.slice(0,75)+" ....":e.noti.message},null,8,["textColor","innerHTML"])])]),r("div",oe,[r("div",ae,[i(v,{horizontalAlign:"right",h:"h-auto ",class:"",onClick:s[4]||(s[4]=d=>t.showMenu=!t.showMenu)},{select:f(()=>[i(c,{name:"vertical-dot",w:"24",h:"24",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200",class:"mt-2 text-base me-1 cursor-pointer"},null,8,["textColor"])]),list:f(()=>[r("div",se,[e.noti.isRead=="0"&&e.noti.type!=t.PsConst.PUSH_NOTI?(x(),y("div",{key:0,onClick:s[1]||(s[1]=d=>t.markAsRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center items-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer"},[i(c,{name:"checkNoCircle",class:"mt-2"}),i(l,{class:"ms-2"},{default:f(()=>[C(P(a.$t("noti_horizontal_item__mark_as_read")),1)]),_:1})])):S("",!0),e.noti.isRead=="1"?(x(),y("div",{key:1,onClick:s[2]||(s[2]=d=>t.markAsUnRead(e.noti.id,e.noti.type)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer items-center"},[i(c,{name:"checkNoCircle",class:"mt-2"}),i(l,{class:"ms-2"},{default:f(()=>[C(P(a.$t("noti_horizontal_item__mark_as_unread")),1)]),_:1})])):S("",!0),i(m,{class:"mx-4"}),r("div",{onClick:s[3]||(s[3]=d=>t.deleteConfirm(e.noti)),class:"w-56 flex justify-center py-4 px-2 hover:bg-fePrimary-50 dark:hover:bg-feAchromatic-800 cursor-pointer items-center"},[i(c,{name:"trash-alt"}),i(l,{class:"ms-2"},{default:f(()=>[C(P(a.$t("noti_horizontal_item__delete_noti")),1)]),_:1})])])]),_:1})]),r("div",ie,[i(l,{class:"text-3xs sm:text-xs truncate",textColor:e.noti.isRead=="0"?e.noti.type==t.PsConst.PUSH_NOTI?"text-feAchromatic-500 dark:text-feAchromatic-200":"text-feAchromatic-500":"text-feAchromatic-500 dark:text-feAchromatic-200"},{default:f(()=>[C(P(t.moment(e.noti.addedDate).format(a.$page.props.dateFormat)),1)]),_:1},8,["textColor"])])])]),i(k,{ref:"ps_loading_dialog"},null,512),i(U,{ref:"ps_confirm_dialog"},null,512)],2)}var Te=Q(W,[["render",re]]);export{Te as default};
