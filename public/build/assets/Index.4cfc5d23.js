import{d as q,p as E,Z as M,i as r,y as Z,B as u,o as i,c as b,b as o,w as l,f as B,q as d,t as c,g as v,a as y,F as A,s as N,n as H,O as G,r as n}from"./app.0e502cc5.js";import{P as J}from"./PsLayout.7915dd73.js";import{P as K}from"./PsLabel.6d5b1b0c.js";import{P as Q}from"./PsButton.ed5c0dad.js";import{P as W}from"./PsDataTable.261b1403.js";import{P as X}from"./PsAlert.24717dd2.js";import{P as Y}from"./PsBreadcrumb2.ad6b6d6d.js";import{d as x,c as ee}from"./PsDangerDialog.195b6d73.js";import{P as te}from"./PsToggle.1bec2c80.js";import{P as ae}from"./PsIcon.8dbf90d4.js";import{P as le}from"./PsBannerIcon.82d105ba.js";import{D as oe}from"./PsTableSearch.46f5341d.js";import{P as re}from"./PsIconButton.acc39cbd.js";import{P as ne}from"./PsTable2.4916fb62.js";import{P as se}from"./PsDropdown.a0b3bb4c.js";import{P as ie}from"./PsDropdownSelect.063a4178.js";import{D as de}from"./DatePicker.f67cbc2b.js";import{_ as ce}from"./plugin-vue_export-helper.21dcd24c.js";import"./PsWarningDialog.db1ec62c.js";import"./PsModal.0f9f6579.js";import"./vue-neat-modal.d03c5dee.js";import"./index.esm.159b9749.js";import"./auth.esm.925cebae.js";import"./SidebarMenuItem.15e6d48b.js";import"./SidebarSubTab.31b29583.js";import"./PsErrorDialog.3227ce3c.js";import"./PsInputWithRightIcon.c0b01b6c.js";import"./PsSuccessDialog.9e44e7fb.js";import"./PsLoading.0f9a761a.js";import"./PsInput.6fad3d25.js";import"./PsLabelCaption.3e68d19d.js";import"./PsLoadingCircleDialog.65ae0069.js";import"./moment.9709ab41.js";import"./ps_constants.0e2a11f9.js";import"./PsIcon1.3db40a94.js";import"./Icons.c01eddd9.js";import"./toggle.284f64a6.js";import"./main.1827f372.js";import"./index.edd1d404.js";const pe=q({name:"Index",components:{Link:E,Head:M,PsLabel:K,PsButton:Q,PsDataTable:W,PsAlert:X,PsBreadcrumb2:Y,PsDangerDialog:x,PsToggle:te,PsIcon:ae,PsBannerIcon:le,Dropdown:oe,PsIconButton:re,PsTextButton:ee,PsTable2:ne,PsDropdown:se,PsDropdownSelect:ie,DatePicker:de},layout:J,props:{status:Object,transactions:Object,packages:Object,checkPermission:Object,sort_field:{type:String,default:""},sort_order:{type:String,default:"desc"},search:String,can:Object,selected_package:Object,selectedDate:Object,selected_payment_method:Object,payment_methods:Object},setup(e){const s=r(!1),R=r(!1),w=r(!0),V=["package.title","user.name"],I="Search";let P=e.search?r(e.search):r(""),S=e.sort_field?r(e.sort_field):r(""),F=e.sort_order?r(e.sort_order):r("desc"),D=r(!1),_=e.selected_package?r(e.selected_package):r(""),f=e.selectedDate?r(e.selectedDate):r(""),h=e.selected_payment_method?r(e.selected_payment_method):r("");const g=Z([{label:"User",key:"user_id",hidden:!1},{label:"Package",key:"package_id",hidden:!1},{label:"Amount",key:"price",hidden:!1},{label:"Payment Method",key:"payment_method",hidden:!1},{label:"Date",key:"added_date",hidden:!1}]),$=[{label:u("package_report_user"),field:"user_id",relation:"user",type:"String",relationField:"name",action:"Action"},{label:u("package_report_package_name"),field:"package_id",relation:"package",type:"String",relationField:["payment_info","id"],action:"Action"},{label:u("package_amount"),field:"price",type:"Integer",action:"Action"},{label:u("package_payment"),field:"payment_method",type:"String",action:"Action"},{label:u("package_date"),field:"added_date",type:"Timestamp",action:"Action"},{label:u("detail_label"),field:"detail",type:"Action",sort:!1}];function C(a){this.$inertia.get(route("package_report.show",a))}function O(a){S.value=a.field,F.value=a.sort_order,m()}function j(a){P.value=a,m(1)}function t(a){m(1,a)}function k(){_.value="",f.value=null,h.value="",m(),w.value=!1,setTimeout(()=>{w.value=!0},1)}function T(a){f.value=a,m(1)}function L(a){_.value=a,m(1)}function z(a){h.value=a,m(1)}function U(a){f.value=a;let p=e.transactions.meta.current_page;m(p)}function m(a=null,p=null){G.get(route("package_report.index"),{sort_field:S.value,sort_order:F.value,page:a!=null?a:e.transactions.meta.current_page,row:p!=null?p:e.transactions.meta.per_page,search:P.value,package_filter:_.value,date_filter:f.value,selected_payment_method:h.value},{preserveScroll:!0,preserveState:!0})}return{showFilter:s,clearFilter:R,globalSearchFields:V,globalSearchPlaceholder:I,columns:$,colFilterOptions:g,handleDetail:C,handleSorting:O,handleSearching:j,handleRow:t,visible:D,handleClearFilter:k,handlePackagefilter:L,selected_package:_,selected_date:f,dateFilter:T,selected_payment_method:h,handlePaymentfilter:z,reRenderDate:w,handleDatefilter:U}},computed:{breadcrumb(){return[{label:u("core__be_dashboard_label"),url:route("admin.index")},{label:u("package_report_module"),color:"text-primary-500"}]}}}),me=["href"],ue={class:"rounded-md shadow-xs w-56"},_e={class:"pt-2 z-30"},fe=["onClick"],he={class:"rounded-md shadow-xs w-56"},ge={class:"pt-2 z-30"},be=["onClick"],ye={key:0,class:"flex flex-row mb-2"},ke={key:1,class:"flex flex-row mb-2"};function ve(e,s,R,w,V,I){const P=n("Head"),S=n("ps-breadcrumb-2"),F=n("ps-banner-icon"),D=n("ps-icon"),_=n("ps-text-button"),f=n("ps-icon-button"),h=n("ps-dropdown-select"),g=n("ps-label"),$=n("ps-dropdown"),C=n("date-picker"),O=n("ps-table2"),j=n("ps-layout");return i(),b(A,null,[o(P,{title:e.$t("package_report_module")},null,8,["title"]),o(j,null,{default:l(()=>[o(S,{items:e.breadcrumb,class:"mb-5 sm:mb-6 lg:mb-8"},null,8,["items"]),e.visible?(i(),B(F,{key:0,visible:e.visible,theme:e.status.flag=="danger"?"bg-red-500":e.status.flag=="warning"?"bg-yellow-500":"bg-green-500",iconName:e.status.flag=="danger"?"close-circle":e.status.flag=="warning"?"alert-triangle":"rightalert",class:"text-white mb-5 sm:mb-6 lg:mb-8",iconColor:"white"},{default:l(()=>[d(c(e.status.msg),1)]),_:1},8,["visible","theme","iconName"])):v("",!0),o(O,{row:e.row,search:e.search,object:e.transactions,colFilterOptions:e.colFilterOptions,columns:e.columns,sort_field:e.sort_field,sort_order:e.sort_order,globalSearchPlaceholder:e.$t("core__be_search_user"),onFilterOptionshandle:e.FilterOptionshandle,onHandleSort:e.handleSorting,onHandleSearch:e.handleSearching,onHandleRow:e.handleRow,searchable:e.showFilter,eye_filter:!1},{searchLeft:l(()=>[y("a",{href:e.route("package_report.csv.export"),class:"font-medium transition duration-150 ease-in-out px-2 py-1.75 ms-1 rounded text-primary-500 border border-primary-500 hover:outline-none hover:ring hover:ring-blue-100 focus:outline-none focus:ring focus:ring-blue-300 opacity-100 flex items-center"},[o(D,{name:"fileUpload",class:"mx-0.5 font-semibold"}),d(c(e.$t("core__be_export_btn")),1)],8,me)]),searchRight:l(()=>[e.showFilter?(i(),B(_,{key:0,onClick:e.handleClearFilter,class:"flex text-sm items-center text-red-400",padding:"py-1 px-4"},{default:l(()=>[o(D,{theme:"dark:text-red-400",name:"cross",class:"me-3"}),d(" "+c(e.$t("core__be_clear_filter")),1)]),_:1},8,["onClick"])):v("",!0),o(f,{colors:e.showFilter?"bg-primary-500 text-white dark:text-secondary-800":"",focus:"",padding:"py-1 px-4",hover:"hover:bg-primary-500 hover:text-white",border:e.showFilter?"border border-primary-500":" border border-secondary-200",leftIcon:"filter",onClick:s[0]||(s[0]=t=>e.showFilter=!e.showFilter)},{default:l(()=>[d(c(e.$t("core__be_filter")),1)]),_:1},8,["colors","border"])]),Filter:l(()=>[o($,{align:"",class:"h-10"},{select:l(()=>[o(h,{placeholder:e.$t("package_report_package_name"),selectedValue:e.selected_package==""||e.selected_package=="all"?"":e.packages.filter(t=>t.id==e.selected_package)[0].value},null,8,["placeholder","selectedValue"])]),list:l(()=>[y("div",ue,[y("div",_e,[y("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[1]||(s[1]=t=>e.handlePackagefilter("all"))},[o(g,{class:"text-gray-200 ms-2"},{default:l(()=>[d(c(e.$t("core__be_select_all")),1)]),_:1})]),(i(!0),b(A,null,N(e.packages,t=>(i(),b("div",{key:t.id,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:k=>e.handlePackagefilter(t.id)},[o(g,{class:H(["ms-2",t.id==e.selected_package?" font-bold":""])},{default:l(()=>[d(c(t.value),1)]),_:2},1032,["class"])],8,fe))),128))])])]),_:1}),o($,{align:"",class:"h-10"},{select:l(()=>[o(h,{placeholder:e.$t("package_report_payment_method"),selectedValue:e.selected_payment_method==""||e.selected_payment_method=="all"?"":e.payment_methods.filter(t=>t==e.selected_payment_method)[0]},null,8,["placeholder","selectedValue"])]),list:l(()=>[y("div",he,[y("div",ge,[y("div",{class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:s[2]||(s[2]=t=>e.handlePaymentfilter("all"))},[o(g,{class:"text-gray-200 ms-2"},{default:l(()=>[d(c(e.$t("core__be_select_all")),1)]),_:1})]),(i(!0),b(A,null,N(e.payment_methods,(t,k)=>(i(),b("div",{key:k,class:"w-56 flex py-2 px-2 hover:bg-primary-000 dark:hover:bg-primary-900 cursor-pointer items-center",onClick:T=>e.handlePaymentfilter(t)},[o(g,{class:H(["ms-2",t==e.selected_payment_method?" font-bold":""])},{default:l(()=>[d(c(t),1)]),_:2},1032,["class"])],8,be))),128))])])]),_:1}),e.reRenderDate?(i(),B(C,{key:0,onDatepick:e.handleDatefilter,class:H(["rounded shadow-sm pt-0.5 focus:outline-none focus:ring-1 focus:ring-primary-500",(e.selected_date==null||e.selected_date=="","w-full")]),value:e.selected_date,"onUpdate:value":s[3]||(s[3]=t=>e.selected_date=t),range:!0,inline:!1,autoApply:!1},null,8,["onDatepick","class","value"])):v("",!0)]),tableRow:l(t=>[t.field=="detail"?(i(),b("div",ye,[o(_,{onClick:k=>e.handleDetail(t.row.id)},{default:l(()=>[d(c(e.$t("core__be_btn_detail")),1)]),_:2},1032,["onClick"])])):v("",!0),t.field=="package_id"?(i(),b("div",ke,[o(g,null,{default:l(()=>[d(c(t.row.package.payment_info.value),1)]),_:2},1024)])):v("",!0)]),_:1},8,["row","search","object","colFilterOptions","columns","sort_field","sort_order","globalSearchPlaceholder","onFilterOptionshandle","onHandleSort","onHandleSearch","onHandleRow","searchable"])]),_:1})],64)}var st=ce(pe,[["render",ve]]);export{st as default};
